var CBLFun=null;$(document).ready(function(){var f=function(g){var b=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return b.test(g)};var c=function(b){var g=/^\d{5,12}$/;return g.test(b)};var a=function(){var b=function(){var D=$("#txtAppMoney");var G=$("#txtUserName");var H=$("#txtBankName");var J=$("#txtSubBank");var A=$("#txtBankNo");var B=$("#txtPhone");var U=$("#txtCZMoney");var y=$("#txtPayMoney");var z=$("#userId").val();$("#linkApply").click(function(){$("#linkPay").removeClass("current").addClass("current2");$(this).removeClass("current2").addClass("current");$("#linkRecharge").removeClass("current");$("#divSQTX").show();$("#divTip").show();$("#divSQCZ").hide();$("#divPay").hide();D.focus()});$("#linkRecharge").click(function(){$("#linkApply").removeClass("current").addClass("current2");$("#linkPay").removeClass("current").addClass("current2");$(this).addClass("current");$("#divSQTX").hide();$("#divTip").hide();$("#divPay").hide();$("#divSQCZ").show();U.focus()});$("#linkPay").click(function(){$("#linkApply").removeClass("current").addClass("current2");$("#linkRecharge").removeClass("current").addClass("current2");$(this).addClass("current");$("#divSQTX").hide();$("#divTip").hide();$("#divSQCZ").hide();$("#divPay").show();y.focus()});var T=e();if(T.t!=undefined){$("#linkRecharge").click()}var L=function(g,h){g.value=g.value.replace(h=="."?(/[^\d.]/g):(/[^\d-]/g),"");g.value=g.value.replace(h=="."?(/^\./g):(/^\-/g),"");g.value=g.value.replace(h=="."?(/\.{2,}/g):(/\-{2,}/g),h);g.value=g.value.replace(h,"$#$").replace(h=="."?(/\./g):(/\-/g),"").replace("$#$",h)};A.bind("keyup",function(g){A.val(A.val().replace(/\s/g,"").replace(/(\w{4})(?=\w)/g,"$1 "))});var S=function(h,g){h.siblings("span").attr("class","oran").html("<em></em>"+g)};var P=function(h,g){h.siblings("span").attr("class","").html(g)};$("input[type='text']").keyup(function(){var g=$(this);var h=g.val();if(h!=""){P(g,"");if(parseInt(h)==0){g.val(0)}}}).blur(function(){var g=parseInt($(this).attr("tip"));N=null;K=true;switch(g){case 1:C();break;case 2:F();break;case 3:O();break;case 4:Q();break;case 5:M();break;case 6:E();break}});var I={money:"",userName:"",bankName:"",subBank:"",bankNo:"",phone:""};var N=null;var K=true;var R=/^[\u4e00-\u9fa5]{2,30}$/;var C=function(){if(D.val()==""){S(D,"\u8bf7\u8f93\u5165\u63d0\u73b0\u91d1\u989d");K=false}else{var i=parseFloat($("#spanBrokerage").html());var g=parseFloat(D.val());var h=/^\d{1,9}(\.\d{1,2})?$/;if(!h.exec(g)){S(D,"\u63d0\u73b0\u91d1\u989d\u4e3a\u6b63\u6574\u6570\u6216\u5e26\u4e24\u4f4d\u5c0f\u6570");K=false}else{if(g>i){S(D,"\u8f93\u5165\u989d\u8d85\u51fa\u53ef\u63d0\u73b0\u91d1\u989d");K=false}else{if(g<100){S(D,"\u63d0\u73b0\u91d1\u989d\u987b\u81f3\u5c11100\u5143");K=false}}}}if(!K&&N==null){N=D}};var F=function(){var g=G.val();if(g==""){S(G,"\u8bf7\u8f93\u5165\u5f00\u6237\u4eba");K=false;if(N==null){N=G}}else{if(!R.test(g)){S(G,"\u5f00\u6237\u4eba\u8f93\u5165\u6709\u8bef");K=false}}};var O=function(){var g=H.val();if(g==""){S(H,"\u8bf7\u8f93\u5165\u94f6\u884c\u540d\u79f0");K=false;if(N==null){N=H}}else{if(!R.test(g)){S(H,"\u94f6\u884c\u540d\u79f0\u8f93\u5165\u6709\u8bef");K=false}}};var Q=function(){var g=J.val();if(g==""){S(J,"\u8bf7\u8f93\u5165\u5f00\u6237\u652f\u884c");K=false;if(N==null){N=J}}else{if(!R.test(g)){S(J,"\u5f00\u6237\u652f\u884c\u8f93\u5165\u6709\u8bef");K=false}}};var M=function(){if(A.val()==""){S(A,"\u8bf7\u8f93\u5165\u94f6\u884c\u5e10\u53f7");K=false}else{var g=/^\d{16,19}$/;if(!g.test(A.val().replace(/[ ]/g,""))){S(A,"\u94f6\u884c\u8d26\u53f7\u4e3a16-19\u4f4d\u6570\u5b57");K=false}}if(!K&&N==null){N=A}};var E=function(){var g=/(^1+[0-9]{10}$)|(^(0[0-9]{2,3}\-)+([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$)/;if(B.val()==""){S(B,"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd");K=false}else{if(!g.test(B.val())){S(B,"\u8054\u7cfb\u7535\u8bdd\u683c\u5f0f\u6709\u8bef\uff0c\u56fa\u8bdd\u683c\u5f0f\u5982\uff1a0755-22228888");K=false}}if(!K&&N==null){N=B}};$("#btnSQTX").click(function(){N=null;K=true;C();F();O();Q();M();E();if(!K){N.focus();return false}I.money=D.val();I.userName=G.val();I.bankName=H.val();I.subBank=J.val();I.bankNo=A.val().replace(/[ ]/g,"");I.phone=B.val();var g='{"userId":"'+z+'","money":"'+I.money+'","bankUser":"'+I.userName+'","bankName":"'+I.bankName+'","bankSubbranch":"'+I.subBank+'","bankNo":"'+I.bankNo+'","phone":"'+I.phone+'"}';$.ajax({url:"/user/ApplyMentionAdd.html",data:"userJSON="+encodeURIComponent(g),type:"post",success:function(h){if(h=="success"){D.val("");G.val("");H.val("");J.val("");A.val("");B.val("");var i=parseFloat($("#spanBrokerage").html());var j=d(i-parseFloat(I.money));$("#spanBrokerage2").html(j);$("#spanBrokerage").html(j);$.PageDialog('<dl class="sAltOK"><dd>\u7533\u8bf7\u6210\u529f\uff0c\u8bf7\u7b49\u5f85\u5ba1\u6838!</dd></dl>',{W:218,H:50,autoClose:true})}else{if(h=="moneyError"){$.PageDialog('<dl class="sAltFail"><dd>\u60a8\u8f93\u5165\u7684\u91d1\u989d\u6709\u8bef\uff01</dd></dl>',{W:218,H:50,autoClose:true})}else{alert("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u4e0e\u7ba1\u7406\u5458\u8054\u7cfb\uff01")}}},error:function(){alert("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u4e0e\u7ba1\u7406\u5458\u8054\u7cfb\uff01")}})});y.keyup(function(){this.value=this.value.replace(/[^\d]/g,"")});$("#btnPay").click(function(){var g=$("#txtPayMoney");var i=$("#txtPayU");if(g.val()==""){S(g,"\u8bf7\u8f93\u5165\u63d0\u73b0\u91d1\u989d");g.focus();return false}else{if(g.val()<10){S(g,"\u63d0\u73b0\u91d1\u989d\u5fc5\u987b\u5927\u4e8e10\u5143");g.focus();return false}else{if(i.val()==""){S(i,"\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u6216\u8d22\u4ed8\u901a\u5e10\u53f7");i.focus();return false}else{if(!(c(i.val())||f(i.val()))){S(i,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u652f\u4ed8\u5b9d\u6216\u8d22\u4ed8\u901a\u5e10\u53f7");i.focus();return false}else{var h='{"userId":"'+z+'","money":"'+g.val()+'","bankUser":"\u652f\u4ed8\u5b9d\u6216\u8d22\u4ed8\u901a","bankName":"\u652f\u4ed8\u5b9d\u6216\u8d22\u4ed8\u901a","bankSubbranch":"\u652f\u4ed8\u5b9d\u6216\u8d22\u4ed8\u901a","bankNo":"'+i.val()+'","phone":""}';$.ajax({url:"/user/ApplyMentionAdd.html",data:"userJSON="+encodeURIComponent(h),type:"post",success:function(j){if(j=="success"){$.PageDialog('<dl class="sAltOK"><dd>\u7533\u8bf7\u6210\u529f\uff0c\u8bf7\u7b49\u5f85\u5ba1\u6838!</dd></dl>',{W:218,H:50,autoClose:true});var k=parseFloat($("#spanBrokerage").html());var l=d(k-parseFloat(g.val()));$("#spanBrokerage2").html(l);$("#spanBrokerage").html(l);$("#spanBrokerage3").html(l)}else{if(j=="moneyError"){$.PageDialog('<dl class="sAltFail"><dd>\u60a8\u8f93\u5165\u7684\u91d1\u989d\u6709\u8bef\uff01</dd></dl>',{W:218,H:50,autoClose:true})}else{alert("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u4e0e\u7ba1\u7406\u5458\u8054\u7cfb\uff01")}}},error:function(){alert("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u4e0e\u7ba1\u7406\u5458\u8054\u7cfb\uff01")}})}}}}});U.keyup(function(){this.value=this.value.replace(/[^\d]/g,"")});$("#btnSQCZ").click(function(){var k=true;var i=parseFloat($("#spanBrokerage2").html());if(i<1){S(U,"\u60a8\u73b0\u6709\u4f63\u91d1\u4e0d\u6ee11\u5143");k=false}else{if(U.val()==""){S(U,"\u8bf7\u8f93\u5165\u5145\u503c\u91d1\u989d");k=false}else{var j=/^[1-9]+[0-9]*]*$/;if(!j.test(U.val())){S(U,"\u8bf7\u8f93\u5165\u6b63\u6574\u6570");k=false}else{if(parseFloat(U.val())>i){S(U,"\u8f93\u5165\u7684\u91d1\u989d\u5927\u4e8e\u53ef\u7528\u4f63\u91d1");k=false}}}}if(!k){U.focus();return}var g='{"userId":"'+z+'","recharge":"'+U.val()+'"}';$.ajax({url:"/user/ApplyMentionAddToUser.html",data:"userJSON="+encodeURIComponent(g),type:"post",success:function(l){if(l=="success"){$.PageDialog('<dl class="sAltOK"><dd>\u64cd\u4f5c\u6210\u529f!</dd></dl>',{W:160,H:50,autoClose:true});h()}else{if(l=="moneyError"){$.PageDialog('<dl class="sAltFail"><dd>\u60a8\u8f93\u5165\u7684\u91d1\u989d\u6709\u8bef\uff01</dd></dl>',{W:218,H:50,autoClose:true})}else{alert("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u4e0e\u7ba1\u7406\u5458\u8054\u7cfb\uff01")}}},error:function(){alert("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u4e0e\u7ba1\u7406\u5458\u8054\u7cfb\uff01")}});var h=function(){var l=d(i-parseFloat(U.val()));$("#spanBrokerage2").html(l);$("#spanBrokerage").html(l);U.val("")}});D.focus()};CBLFun=new b()};function e(){var g=location.search;var b=new Object();if(g.indexOf("?")!=-1){var j=g.substr(1);strs=j.split("&");for(var h=0;h<strs.length;h++){b[strs[h].split("=")[0]]=unescape(strs[h].split("=")[1])}}return b}function d(b){return Math.round(b*Math.pow(10,2))/Math.pow(10,2)}a()});
